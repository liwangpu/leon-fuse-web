<div class="fxLayout-container page-button-container" fxLayout='column'>

  <div fxFlex fxLayout='row' fxLayoutAlign='end center'>

    <ng-container [ngSwitch]='mdSrv.createdUrl==""||mdSrv.createdUrl==undefined'>

      <ng-container *ngSwitchCase="false">
        <button mat-raised-button [routerLink]="'/'+mdSrv.createdUrl" class="newitem-button mat-white-bg mt-12" *ngIf='!mdSrv.readDataOnly'>
          <span>{{'button.NEW'|translate}}</span>
        </button>
      </ng-container>

      <ng-container *ngSwitchCase="true">
        <button mat-raised-button class="newitem-button mat-white-bg mt-12" *ngIf='!mdSrv.readDataOnly' (click)='mdSrv.createdAction.onClick()'>
          <span>{{ (mdSrv.createdAction.title?mdSrv.createdAction.title:'button.NEW')|translate}}</span>
        </button>
      </ng-container>

    </ng-container>

  </div>

  <div class="list-button-container" fxLayout='row wrap' fxLayoutAlign='end end'>

    <button mat-button class="cus-manage-button" (click)='refresh()'>
      <mat-icon class="cus-header-icons">refresh</mat-icon>
      <span>{{'button.Refresh'|translate}}</span>
    </button>

    <button mat-button class="cus-manage-button" (click)='modeChange()' *ngIf='isButtonEnable(true)'>
      <mat-icon class="cus-header-icons"> {{ !mdSrv.selectMode ?'check_box':'indeterminate_check_box'}} </mat-icon>
      <span>{{'button.Select'|translate}}</span>
    </button>

    <button mat-button class="cus-manage-button" [matMenuTriggerFor]="advanceMenu" *ngIf='isButtonEnable(true)'>
      <mat-icon class="cus-header-icons">settings</mat-icon>
      <span>{{'button.Advance'|translate}}</span>
    </button>

    <button mat-button class="cus-manage-button" [matMenuTriggerFor]="displayMenu">
      <mat-icon class="cus-header-icons">view_list</mat-icon>
      <span>{{'button.Display'|translate}}</span>
    </button>

  </div>
</div>

<div style="display: none;">
  <mat-menu #advanceMenu="matMenu">
    <!--批量删除-->
    <button mat-menu-item [disabled]='mdSrv.selectedItems.length>0?false:true' (click)='batchDelete()' *ngIf='!mdSrv.readDataOnly'>
      <mat-icon class="cus-mat-button-icon">delete</mat-icon>
      <span>{{'button.Delete'|translate}}</span>
    </button>
    <!--自定义按钮-->
    <ng-container *ngFor='let item of mdSrv.advanceMenuItems'>
      <button mat-menu-item *ngIf='isButtonEnable(item.needPermission)' (click)='item.click(mdSrv.selectedItems)' [disabled]='item.needSelected?(mdSrv.selectedItems.length>0?false:true):false'>
        <mat-icon class="cus-mat-button-icon">{{item.icon}}</mat-icon>
        <span>{{item.name|translate}}</span>
      </button>
    </ng-container>

    <!--导出数据-->
    <button mat-menu-item (click)='exportData()' *ngIf='isButtonEnable(true)'>
      <mat-icon class="cus-mat-button-icon">cloud_download</mat-icon>
      <span>{{'button.Export'|translate}}</span>
    </button>
  </mat-menu>

  <mat-menu #displayMenu="matMenu">
    <ng-container *ngFor='let mod of mdSrv.enableDisplayModes'>
      <ng-container [ngSwitch]='mod'>
        <button *ngSwitchCase="1" mat-menu-item (click)='displayModeChange(1)'>
          <mat-icon class="cus-mat-button-icon">list</mat-icon>
          <span>{{'button.List'|translate}}</span>
        </button>
        <button *ngSwitchCase="2" mat-menu-item (click)='displayModeChange(2)'>
          <mat-icon class="cus-mat-button-icon">blur_linear</mat-icon>
          <span>{{'button.Litimg'|translate}}</span>
        </button>
        <button *ngSwitchCase="31" mat-menu-item (click)='displayModeChange(31)'>
          <mat-icon class="cus-mat-button-icon">list</mat-icon>
          <span>{{'button.Litimg'|translate}}</span>
        </button>
        <ng-container *ngSwitchDefault></ng-container>
      </ng-container>
    </ng-container>
  </mat-menu>
</div>